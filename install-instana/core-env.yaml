env:
#
# base domain
#
- name: base-domain
  path: >
    .spec.baseDomain
  values:
    default: strenv(instana_base_domain)

#
# resource profile
#
- name: resource-profile
  path: >
    .spec.resourceProfile
  values:
    default: small
    dev: strenv(resource_profile)
    uat: large
    prod: strenv(resource_profile)

#
# envoy gateway 
#
- name: envoy-gateway-enabled
  not_before: 293
  path: .spec.gatewayConfig.enabled
  values:
    default: true

- name: envoy-gateway-image-registry
  not_before: 293
  path: .spec.gatewayConfig.gateway.imageConfig.registry
  values:
    default: strenv(private_registry)

- name: envoy-gateway-image-tag
  not_before: 293
  path: .spec.gatewayConfig.gateway.imageConfig.tag
  values:
    default: strenv(envoy_gateway_image_tag)

- name: envoy-gateway-controller-image-registry
  not_before: 293
  path: .spec.gatewayConfig.controller.imageConfig.registry
  values: 
    default: strenv(private_registry)

- name: envoy-gateway-controller-image-tag
  not_before: 293
  path: .spec.gatewayConfig.controller.imageConfig.tag
  values: 
    default: strenv(envoy_gateway_controller_image_tag)

#
# geo db url
# https://artifact-public.instana.io/artifactory/rel-generic-instana-virtual/geodb/geolite2-city.tar.gz
#
#- name: geo-db-url
#  not_before: 293
#  path: .spec.geoDbUrl
#  values:
#    default: strenv(core_geodb_url)

#
# autoscaling
#
- name: autoscaling
  not_before: 293
  path: .spec.autoscalingEnabled
  values:
    default: true

#
# beeinstana config
#

#
# cassandra config
#
- name: cassandra-datacenter
  path: >
    .spec.datastoreConfigs.cassandraConfigs[0].datacenter
  values:
    default: cassandra

#- name: cassandra-replication-factor
#  path: >
#    .spec.datastoreConfigs.cassandraConfigs[0].replicationFactor
#  values:
#    default: 1

#
# elasticsearch config
#
- name: elasticsearch-cluster-name
  path: .spec.datastoreConfigs.elasticsearchConfig.clusterName
  values:
    default: instana

#- name: elasticsearch-index-partition-size
#  path: .spec.datastoreConfigs.elasticsearchConfig.defaultIndexRoutingPartitionSize
#  values:
#    default: 2

#- name: elasticsearch-index-shards
#  path: .spec.datastoreConfigs.elasticsearchConfig.defaultIndexShards
#  values:
#    default: 5

#
# kafka config
#
#- name: kafka-replication-factor
#  path: .spec.datastoreConfigs.kafkaConfig.replicationFactor
#  values:
#    default: 1

- name: kafka-sasl-mechanism
  path: .spec.datastoreConfigs.kafkaConfig.saslMechanism
  values:
    default: SCRAM-SHA-512

#
# images
#
- name: image-registry
  path: >
    .spec.imageConfig.registry
  values:
    default: strenv(private_registry)

- name: image-tag
  path: >
    .spec.imageConfig.tag
  values:
    default: strenv(core_image_tag)

#
# image pull secret
#
- name: image-pull-secret
  path: >
    .spec.imagePullSecrets[0].name
  values:
    default: instana-registry

#
# pvc storage requests and storage class
#
# comment out if using s3 or gcloud storage
#

#
# raw spans pvc storage request
#
- name: raw-spans-pvc-storage-request
  path: >
    .spec.storageConfigs.rawSpans.pvcConfig.resources.requests.storage
  values:
    default: 50Gi
    dev: 50Gi
    uat: 100Gi
    prod: 100Gi
    #prod: 200Gi

#
# raw spans pvc storage class
#
- name: raw-spans-pvc-storage-class
  path: >
    .spec.storageConfigs.rawSpans.pvcConfig.storageClassName
  values:
    default: strenv(rwx_storageclass)

#
# synthetics pvc storage request
#
- name: synthetics-pvc-storage-request
  path: >
    .spec.storageConfigs.synthetics.pvcConfig.resources.requests.storage
  values:
    default: 50Gi
    dev: 50Gi
    uat: 50Gi
    prod: 50Gi

#
# synthetics pvc storage class
#
- name: synthetics-pvc-storage-class
  path: >
    .spec.storageConfigs.synthetics.pvcConfig.storageClassName
  values:
    default: strenv(rwx_storageclass)

#
# synthetics keystore pvc storage request
#
- name: synthetics-keystore-pvc-storage-request
  path: >
    .spec.storageConfigs.syntheticsKeystore.pvcConfig.resources.requests.storage
  values:
    default: 50Gi
    dev: 50Gi
    uat: 10Gi
    prod: 10Gi

#
# synthetics keystore pvc storage class
#
- name: synthetics-keystore-pvc-storage-class
  path: >
    .spec.storageConfigs.syntheticsKeystore.pvcConfig.storageClassName
  values:
    default: strenv(rwx_storageclass)

#
# eum source maps pvc storage request
#
- name: eum-source-maps-pvc-storage-request
  path: >
    .spec.storageConfigs.eumSourceMaps.pvcConfig.resources.requests.storage
  values:
    default: 1Gi
    dev: 1Gi
    uat: 1Gi
    prod: 1Gi

#
# eum source maps pvc storage class
#
- name: eum-source-maps-pvc-storage-class
  path: >
    .spec.storageConfigs.eumSourceMaps.pvcConfig.storageClassName
  values:
    default: strenv(rwx_storageclass)

#
# acceptors
#
- name: agent-acceptor-host
  not_after: 291
  path: .spec.agentAcceptorConfig.host
  values:
    default: strenv(agent_acceptor_host)

- name: acceptors-acceptor-host
  not_before: 293
  path: .spec.acceptors.agent.host
  values:
    default: strenv(agent_acceptor_host)

- name: acceptors-acceptor-port
  not_before: 293
  path: .spec.acceptors.agent.port
  values:
    default: strenv(agent_acceptor_port)

- name: acceptors-eum-host
  not_before: 293
  path: .spec.acceptors.eum.host
  values:
    default: strenv(eum_acceptor_host)

- name: acceptors-eum-port
  not_before: 293
  path: .spec.acceptors.eum.port
  values:
    default: strenv(eum_acceptor_port)

- name: acceptors-otlp-grpc-host
  not_before: 293
  path: .spec.acceptors.otlp.grpc.host
  values:
    default: strenv(otlp_grpc_acceptor_host)

- name: acceptors-otlp-grpc-port
  not_before: 293
  path: .spec.acceptors.otlp.grpc.port
  values:
    default: strenv(otlp_grpc_acceptor_port)

- name: acceptors-otlp-http-host
  not_before: 293
  path: .spec.acceptors.otlp.http.host
  values:
    default: strenv(otlp_http_acceptor_host)

- name: acceptors-otlp-http-port
  not_before: 293
  path: .spec.acceptors.otlp.http.port
  values:
    default: strenv(otlp_http_acceptor_port)

- name: acceptors-serverless-host
  not_before: 293
  path: .spec.acceptors.serverless.host
  values:
    default: strenv(serverless_acceptor_host)

- name: acceptors-serverless-port
  not_before: 293
  path: .spec.acceptors.serverless.port
  values:
    default: strenv(serverless_acceptor_port)

- name: acceptors-synthetics-host
  not_before: 293
  path: .spec.acceptors.synthetics.host
  values:
    default: strenv(synthetics_acceptor_host)

- name: acceptors-synthetics-port
  not_before: 293
  path: .spec.acceptors.synthetics.port
  values:
    default: strenv(synthetics_acceptor_port)

#
# single ingress path style
#
- name: url-format-pathstyle
  not_before: 293
  #if_true: subdomain single_ingress
  path: .spec.properties.[]|select(.name == "config.url.format.pathStyle")|.value
  values:
    default: "false"

#
# agent acceptor
#
- name: acceptor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "acceptor")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 11

- name: acceptor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "acceptor")
    .resources.requests.memory
  values:
    default: 7124Mi
    dev: 8Gi
    uat: 3Gi
    prod: 3Gi

- name: acceptor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "acceptor")
    .resources.limits.memory
  values:
    default: 7124Mi
    dev: 8Gi
    uat: 3Gi
    prod: 3Gi

- name: acceptor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "acceptor")
    .resources.requests.cpu
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# accountant
#
- name: accountant-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "accountant")
    .replicas
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1
    #prod: 3

- name: accountant-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "accountant")
    .resources.requests.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: accountant-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "accountant")
    .resources.limits.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: accountant-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "accountant")
    .resources.requests.cpu
  values:
    default: 351m
    dev: 500m
    uat: 1
    prod: 1

#
# appdata health aggregator
#
- name: appdata-health-aggregator-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-aggregator")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 11

- name: appdata-health-aggregator-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-aggregator")
    .resources.requests.memory 
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: appdata-health-aggregator-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-aggregator")
    .resources.limits.memory 
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: appdata-health-aggregator-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-aggregator")
    .resources.requests.cpu 
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# appdata-health-processor
#
- name: appdata-health-processor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-processor")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 9

- name: appdata-health-processor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-processor")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: appdata-health-processor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-processor")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: appdata-health-processor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-health-processor")
    .resources.requests.cpu 
  values:
    default: 702m
    dev: 1
    uat: 1
    prod: 1

#
# appdata reader
#
- name: appdata-reader-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-reader")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 11

- name: appdata-reader-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-reader")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 3Gi
    prod: 3Gi

- name: appdata-reader-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-reader")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 3Gi
    prod: 3Gi

- name: appdata-reader-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-reader")
    .resources.requests.cpu 
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# appdata writer
#
- name: appdata-writer-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-writer")
    .replicas
  values:
    default: 4
    dev: 1
    uat: 1
    prod: 1
    #prod: 21

- name: appdata-writer-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-writer")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 5Gi
    prod: 5Gi

- name: appdata-writer-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-writer")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 5Gi
    prod: 5Gi

- name: appdata-writer-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-writer")
    .resources.requests.cpu 
  values:
    default: 1316m
    dev: 2
    uat: 1
    prod: 1

#
# butler
#
- name: butler-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "butler")
    .replicas
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1
    #prod: 3

- name: butler-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "butler")
    .resources.requests.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: butler-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "butler")
    .resources.limits.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: butler-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "butler")
    .resources.requests.cpu 
  values:
    default: 351m
    dev: 500m
    uat: 1
    prod: 1

#
# cashier ingest
#
- name: cashier-ingest-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-ingest")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 11

- name: cashier-ingest-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-ingest")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: cashier-ingest-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-ingest")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: cashier-ingest-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-ingest")
    .resources.requests.cpu 
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# cashier rollup
#
- name: cashier-rollup-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-rollup")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 11

- name: cashier-rollup-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-rollup")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: cashier-rollup-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-rollup")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: cashier-rollup-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "cashier-rollup")
    .resources.requests.cpu 
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# eum acceptor
#
- name: eum-acceptor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-acceptor")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 6
    #prod: 11

- name: eum-acceptor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-acceptor")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: eum-acceptor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-acceptor")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: eum-acceptor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-acceptor")
    .resources.requests.cpu 
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# eum health processor
#
- name: eum-health-processor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-health-processor")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 9

- name: eum-health-processor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-health-processor")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: eum-health-processor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-health-processor")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 1Gi
    prod: 1Gi

- name: eum-health-processor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-health-processor")
    .resources.requests.cpu 
  values:
    default: 702m
    dev: 1
    uat: 1
    prod: 1

#
# eum processor
#
- name: eum-processor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-processor")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 9

- name: eum-processor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-processor")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: eum-processor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-processor")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: eum-processor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "eum-processor")
    .resources.requests.cpu 
  values:
    default: 702m
    dev: 1
    uat: 1
    prod: 1

#
# gateway
#
- name: gateway-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "gateway")
    .replicas
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1
    #prod: 5

- name: gateway-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "gateway")
    .resources.requests.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: gateway-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "gateway")
    .resources.limits.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: gateway-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "gateway")
    .resources.requests.cpu 
  values:
    default: 702m
    dev: 1
    uat: 1
    prod: 1

#
# groundskeeper
#
- name: groundskeeper-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "groundskeeper")
    .replicas
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1
    #prod: 5

- name: groundskeeper-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "groundskeeper")
    .resources.requests.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: groundskeeper-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "groundskeeper")
    .resources.limits.memory
  values:
    default: 4348Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: groundskeeper-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "groundskeeper")
    .resources.requests.cpu 
  values:
    default: 702m
    dev: 1
    uat: 1
    prod: 1

#
# js-stack-trace-translator
#
- name: js-stack-trace-translator-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "js-stack-trace-translator")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 11

- name: js-stack-trace-translator-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "js-stack-trace-translator")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: js-stack-trace-translator-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "js-stack-trace-translator")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: js-stack-trace-translator-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "js-stack-trace-translator")
    .resources.requests.cpu 
  values:
    default: 877m
    dev: 1
    uat: 1
    prod: 1

#
# serverless-acceptor
#
- name: serverless-acceptor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "serverless-acceptor")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 8

- name: serverless-acceptor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "serverless-acceptor")
    .resources.requests.memory
  values:
    default: 2899Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: serverless-acceptor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "serverless-acceptor")
    .resources.limits.memory
  values:
    default: 2899Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: serverless-acceptor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "serverless-acceptor")
    .resources.requests.cpu 
  values:
    default: 614m
    dev: 1
    uat: 1
    prod: 1

#
# sli-evaluator
#
- name: sli-evaluator-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "sli-evaluator")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 1
    prod: 1
    #prod: 9

- name: sli-evaluator-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "sli-evaluator")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: sli-evaluator-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "sli-evaluator")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 2Gi
    prod: 2Gi

- name: sli-evaluator-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "sli-evaluator")
    .resources.requests.cpu 
  values:
    default: 702m
    dev: 1
    uat: 1
    prod: 1

#
# ui-client
#
- name: ui-client-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-client")
    .replicas
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1
    #prod: 3

- name: ui-client-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-client")
    .resources.requests.memory
  values:
    default: 955Mi
    dev: 1Gi
    uat: 1457Mi
    prod: 1859Mi

- name: ui-client-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-client")
    .resources.limits.memory
  values:
    default: 955Mi
    dev: 1Gi
    uat: 1457Mi
    prod: 1859Mi

- name: ui-client-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-client")
    .resources.requests.cpu 
  values:
    default: 351m
    dev: 500m
    uat: 535m
    prod: 681m

#
# tag processor
#
- name: tag-processor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "tag-processor")
    .replicas
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1

- name: tag-processor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "tag-processor")
    .resources.requests.memory
  values:
    default: 4500Mi
    dev: 4Gi
    uat: 9000Mi
    prod: 12000Mi

- name: tag-processor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "tag-processor")
    .resources.limits.memory
  values:
    default: 4500Mi
    dev: 4Gi
    uat: 9000Mi
    prod: 12000Mi

- name: tag-processor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "tag-processor")
    .resources.requests.cpu 
  values:
    default: 1
    dev: 1
    uat: 1
    prod: 1

#
# optional features
#

# logging, requires second clickhouse cluster and license
- name: feature.logging.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.logging.enabled")|.enabled
  values:
    default: false

- name: feature.beeinstana.infra.metrics.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.beeinstana.infra.metrics.enabled")|.enabled
  values:
    default: true

- name: feature.infra.smart.alerts.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.infra.smart.alerts.enabled")|.enabled
  values:
    default: true

- name: feature.automation.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.automation.enabled")|.enabled
  values:
    default: true

# requires core.storageConfigs.synthetics|syntheticsKeystore
- name: feature.synthetics.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.synthetics.enabled")|.enabled
  values:
    default: true

- name: feature.kubecost.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.kubecost.enabled")|.enabled
  values:
    default: false

- name: feature.pcf.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.pcf.enabled")|.enabled
  values:
    default: false

- name: feature.vsphere.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.vsphere.enabled")|.enabled
  values:
    default: false

- name: feature.openstack.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.openstack.enabled")|.enabled
  values:
    default: false

- name: feature.phmc.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.phmc.enabled")|.enabled
  values:
    default: false

- name: feature.powervc.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.powervc.enabled")|.enabled
  values:
    default: false

- name: feature.zhmc.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.zhmc.enabled")|.enabled
  values:
    default: false

- name: feature.business.observability.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.business.observability.enabled")|.enabled
  values:
    default: false

- name: feature.assistme.enabled
  path: .spec.featureFlags.[]|select(.name == "feature.assistme.enabled")|.enabled
  values:
    default: true

#
# retention
#
- name: retention.metrics.rollup5
  path: .spec.properties.[]|select(.name == "retention.metrics.rollup5")|.value
  # 7 days * 24 hours * 60 min * 60 sec
  values:
    default: 604800

- name: retention.metrics.rollup60
  path: .spec.properties.[]|select(.name == "retention.metrics.rollup60")|.value
  # 7 days * 24 hours * 60 min * 60 sec
  values:
    default: 604800

- name: retention.metrics.rollup300
  path: .spec.properties.[]|select(.name == "retention.metrics.rollup300")|.value
  # 15 days * 24 hours * 60 min * 60 sec, coarse metrics
  values:
    default: 1296000

- name: retention.metrics.rollup3600
  path: .spec.properties.[]|select(.name == "retention.metrics.rollup3600")|.value
  # 30 days * 24 hours * 60 min * 60 sec, long-term visualization
  values:
    default: 2592000

- name: retention.metrics.rawPayload
  path: .spec.properties.[]|select(.name == "retention.metrics.rawPayload")|.value
  # 7 days * 24 hours * 60 min * 60 sec
  values:
    default: 604800

- name: config.appdata.shortterm.retention.days
  path: .spec.properties.[]|select(.name == "config.appdata.shortterm.retention.days")|.value
  # 7 days
  values:
    default: 7

- name: config.synthetics.retention.days
  path: .spec.properties.[]|select(.name == "config.synthetics.retention.days")|.value
  # 7 days
  values:
    default: 7

#
# tolerations
#
- name: acceptor-pod-toleration-key
  #if_true: core_tolerations_enabled
  path: >
    .spec.componentConfigs.[]|select(.name=="acceptor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: acceptor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="acceptor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: accountant-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="accountant")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: accountant-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="accountant")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: appdata-health-aggregator-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-health-aggregator")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: appdata-health-aggregator-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-health-aggregator")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: appdata-health-processor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-health-processor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: appdata-health-processor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-health-processor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: appdata-reader-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-reader")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: appdata-reader-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-reader")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: appdata-writer-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-writer")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: appdata-writer-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-writer")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: butler-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="butler")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: butler-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="butler")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: cashier-ingest-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="cashier-ingest")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: cashier-ingest-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="cashier-ingest")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: cashier-rollup-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="cashier-rollup")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: cashier-rollup-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="cashier-rollup")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: eum-acceptor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="eum-acceptor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: eum-acceptor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="eum-acceptor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: eum-health-processor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="eum-health-processor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: eum-health-processor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="eum-health-processor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: eum-processor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="eum-processor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: eum-processor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="eum-processor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: gateway-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="gateway")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: gateway-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="gateway")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: groundskeeper-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="groundskeeper")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: groundskeeper-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="groundskeeper")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: js-stack-trace-translator-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="js-stack-trace-translator")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: js-stack-trace-translator-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="js-stack-trace-translator")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: serverless-acceptor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="serverless-acceptor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: serverless-acceptor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="serverless-acceptor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: sli-evaluator-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="sli-evaluator")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: sli-evaluator-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="sli-evaluator")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: ui-client-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="ui-client")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: ui-client-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="ui-client")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: log-processor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="log-processor")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: log-processor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="log-processor")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: log-reader-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="log-reader")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: log-reader-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="log-reader")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

- name: log-writer-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="log-writer")|
    .tolerations[0].key
  values:
    default: strenv(core_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: log-writer-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="log-writer")|
    .tolerations[0].value
  values:
    default: strenv(core_toleration_value)
    #uat: appng
    #prod: appng

