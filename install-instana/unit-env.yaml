env:
- name: tenant-unit
  path: .metadata.name
  values:
    default: strenv(instana_tenant_unit)

- name: namespace
  path: .metadata.namespace
  values:
    # fixed
    default: instana-units

- name: core-name
  path: .spec.coreName
  values:
    # fixed
    default: instana-core

- name: core-namespace
  path: .spec.coreNamespace
  values:
    # fixed
    default: instana-core

- name: tenant
  path: .spec.tenantName
  values:
    default: strenv(instana_tenant)

- name: unit
  path: .spec.unitName
  values:
    default: strenv(instana_unit)

- name: resource-profile
  path: .spec.resourceProfile
  values:
    default: strenv(resource_profile)
    dev: strenv(resource_profile)

#
# appdata legacy converter
#
- name: appdata-legacy-converter-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-legacy-converter")
    .replicas
  values:
    default: 3
    dev: 1
    uat: 9
    prod: 16

- name: appdata-legacy-converter-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-legacy-converter")
    .resources.requests.memory
  values:
    default: 3962Mi
    dev: 4Gi
    uat: 4027Mi
    prod: 4338Mi

- name: appdata-legacy-converter-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-legacy-converter")
    .resources.limits.memory
  values:
    default: 3962Mi
    dev: 4Gi
    uat: 4027Mi
    prod: 4338Mi

- name: appdata-legacy-converter-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-legacy-converter")
    .resources.requests.cpu
  values:
    default: 877m
    dev: 1
    uat: 892m
    prod: 958m

#
# appdata-processor
#
- name: appdata-processor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-processor")
    .replicas
  values:
    default: 4
    dev: 1
    uat: 11
    prod: 21

- name: appdata-processor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-processor")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 4903Mi
    prod: 4917Mi

- name: appdata-processor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-processor")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 4903Mi
    prod: 4917Mi

- name: appdata-processor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "appdata-processor")
    .resources.requests.cpu
  values:
    default: 1754m
    dev: 2
    uat: 1946m
    prod: 1947m

#
# filler
#
- name: filler-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "filler")
    .replicas
  values:
    default: 4
    dev: 1
    uat: 11
    prod: 21

- name: filler-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "filler")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 4903Mi
    prod: 4917Mi

- name: filler-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "filler")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 4903Mi
    prod: 4917Mi

- name: filler-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "filler")
    .resources.requests.cpu
  values:
    default: 1754m
    dev: 2
    uat: 1946m
    prod: 1947m

#
# issuer tracker
#
- name: issue-tracker-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "issue-tracker")
    .replicas
  values:
    default: 2
    dev: 1
    uat: 6
    prod: 11

- name: issue-tracker-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "issue-tracker")
    .resources.requests.memory
  values:
    default: 2174Mi
    dev: 2Gi
    uat: 2210Mi
    prod: 2308Mi

- name: issue-tracker-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "issue-tracker")
    .resources.limits.memory
  values:
    default: 2174Mi
    dev: 2Gi
    uat: 2210Mi
    prod: 2308Mi

- name: issue-tracker-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "issue-tracker")
    .resources.requests.cpu
  values:
    default: 877m
    dev: 1
    uat: 892m
    prod: 929m

#
# processor
#
- name: processor-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "processor")
    .replicas
  values:
    default: 4
    dev: 1
    uat: 11
    prod: 21

- name: processor-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "processor")
    .resources.requests.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 4903Mi
    prod: 4917Mi

- name: processor-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "processor")
    .resources.limits.memory
  values:
    default: 4421Mi
    dev: 4Gi
    uat: 4903Mi
    prod: 4917Mi

- name: processor-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "processor")
    .resources.requests.cpu
  values:
    default: 1754m
    dev: 2
    uat: 1946m
    prod: 1947m

#
# ui backend
#
- name: ui-backend-replicas
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-backend")
    .replicas
  values:
    default: 4
    dev: 1
    uat: 11
    prod: 21

- name: ui-backend-req-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-backend")
    .resources.requests.memory
  values:
    default: 2210Mi
    dev: 2Gi
    uat: 2451Mi
    prod: 2459Mi

- name: ui-backend-lim-mem
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-backend")
    .resources.limits.memory
  values:
    default: 2210Mi
    dev: 2Gi
    uat: 2451Mi
    prod: 2459Mi

- name: ui-backend-req-cpu
  path: >
    .spec.componentConfigs.[]|select(.name == "ui-backend")
    .resources.requests.cpu
  values:
    default: 877m
    dev: 1
    uat: 973m
    prod: 973m

#
# tolerations
#
- name: appdata-legacy-converter-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-legacy-converter")|
    .tolerations[0].key
  values:
    default: strenv(unit_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: appdata-legacy-converter-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-legacy-converter")|
    .tolerations[0].value
  values:
    default: strenv(unit_toleration_value)
    #uat: appng
    #prod: appng

- name: appdata-processor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-processor")|
    .tolerations[0].key
  values:
    default: strenv(unit_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: appdata-processor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="appdata-processor")|
    .tolerations[0].value
  values:
    default: strenv(unit_toleration_value)
    #uat: appng
    #prod: appng

- name: filler-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="filler")|
    .tolerations[0].key
  values:
    default: strenv(unit_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: filler-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="filler")|
    .tolerations[0].value
  values:
    default: strenv(unit_toleration_value)
    #uat: appng
    #prod: appng

- name: issue-tracker-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="issue-tracker")|
    .tolerations[0].key
  values:
    default: strenv(unit_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: issue-tracker-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="issue-tracker")|
    .tolerations[0].value
  values:
    default: strenv(unit_toleration_value)
    #uat: appng
    #prod: appng

- name: processor-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="processor")|
    .tolerations[0].key
  values:
    default: strenv(unit_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: processor-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="processor")|
    .tolerations[0].value
  values:
    default: strenv(unit_toleration_value)
    #uat: appng
    #prod: appng

- name: ui-backend-pod-toleration-key
  path: >
    .spec.componentConfigs.[]|select(.name=="ui-backend")|
    .tolerations[0].key
  values:
    default: strenv(unit_toleration_key)
    #uat: dedicated
    #prod: dedicated

- name: ui-backend-pod-toleration-value
  path: >
    .spec.componentConfigs.[]|select(.name=="ui-backend")|
    .tolerations[0].value
  values:
    default: strenv(unit_toleration_value)
    #uat: appng
    #prod: appng

